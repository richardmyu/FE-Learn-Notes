## Cnavas

`<canvas>` 是一个可以使用脚本(通常为 JavaScript )来绘制图形的 HTML 元素。

### 基本用法

##### `<canvas>` 元素

`<canvas id="canvas" width="150" height="150"></canvas>`

`<canvas>` 标签只有两个属性—— `width` 和 `height`（每个标签都有 `id` 和 `class`、`style` 等属性）。这些都是可选的，并且同样利用 DOM properties 来设置。当没有设置宽度和高度的时候，canvas 会初始化宽度为 300 像素和高度为 150 像素。该元素可以使用 CSS 来定义大小，但在绘制时图像会伸缩以适应它的框架尺寸：如果 CSS 的尺寸与初始画布的比例不一致，它会出现扭曲。

> 注意: 如果你绘制出来的图像是扭曲的, 尝试用 `width` 和 `height` 属性为 `<canvas>` 明确规定宽高，而不是使用 CSS。

与 `<img>` 不同：

1. 容易定义一些替代内容；
2. `<canvas>` 元素需要结束标签(`</canvas>`)。如果结束标签不存在，则文档的其余部分会被认为是替代内容，将不会显示出来。

##### 渲染上下文（The rendering context）

`<canvas>` 元素创造了一个固定大小的画布，它公开了一个或多个渲染上下文，其可以用来绘制和处理要展示的内容。

canvas 起初是空白的。为了展示，首先脚本需要找到渲染上下文，然后在它的上面绘制。`<canvas>` 元素有一个叫做 `getContext()` 的方法，这个方法是用来获得渲染上下文和它的绘画功能。`getContext()` 只有一个参数，上下文的格式。对于2D图像而言，你可以使用 `CanvasRenderingContext2D`。

```js
var canvas = document.getElementById('convas');
var ctx = canvas.getContext('2d');
```

> [简单例子](../canvas/demo/index.html)

### 绘制图形

不同于 SVG，`<canvas>` 只支持两种形式的图形绘制：矩形和路径（由一系列点连成的线段）。所有其他类型的图形都是通过一条或者多条路径组合而成的。

##### 绘制矩形

canvas提供了三种方法绘制矩形：

- `fillRect(x, y, width, height)`
  - 绘制一个填充的矩形
- `strokeRect(x, y, width, height)`
  - 绘制一个矩形的边框
- `clearRect(x, y, width, height)`
  - 清除指定矩形区域，让清除部分完全透明。

> [demo](../canvas/demo/rect.html)

##### 绘制路径

图形的基本元素是路径。路径是通过不同颜色和宽度的线段或曲线相连形成的不同形状的点的集合。一个路径，甚至一个子路径，都是闭合的。使用路径绘制图形需要一些额外的步骤。

1. 首先，你需要创建路径起始点。
2. 然后你使用画图命令去画出路径。
3. 之后你把路径封闭。
4. 一旦路径生成，你就能通过描边或填充路径区域来渲染图形。

以下是所要用到的函数：

- `beginPath()`
  - 新建一条路径，生成之后，图形绘制命令被指向到路径上生成路径。(调用 `beginPath()` 之后，或者 canvas 刚建的时候，第一条路径构造命令通常被视为是 `moveTo()`，无论实际上是什么。出于这个原因，你几乎总是要在设置路径之后专门指定你的起始位置。)
- `closePath()`
  - 闭合路径之后图形绘制命令又重新指向到上下文中。不是必需的。这个方法会通过绘制一条从当前点到开始点的直线来闭合图形。如果图形是已经闭合了的，即当前点为开始点，该函数什么也不做。
- `stroke()`
  - 通过线条来绘制图形轮廓。（连线）
- `fill()`
  - 通过填充路径的内容区域生成实心的图形。（填充）

> 当调用 `fill()` 函数时，所有没有闭合的形状都会自动闭合，所以不需要调用 `closePath()` 函数。但是调用 `stroke()` 时并不会自动闭合。

**移动笔触**

- `moveTo(x, y)`
  - 将笔触移动到指定的坐标 x 以及 y 上。

当 canvas 初始化或者 `beginPath()` 调用后，通常会使用 `moveTo()` 函数设置起点，也能够使用 `moveTo()` 绘制一些不连续的路径。

**线**

- `lineTo(x, y)`
  - 绘制一条从当前位置到指定 x 以及 y 位置的直线。

**圆弧**

- `arc(x, y, radius, startAngle, endAngle, anticlockwise)`
  - 画一个以（x,y）为圆心的以 `radius` 为半径的圆弧（圆），从 `startAngle` 开始到 `endAngle` 结束，按照 `anticlockwise` 给定的方向（默认为顺时针）来生成。
- `arcTo(x1, y1, x2, y2, radius)`
  - 根据给定的控制点和半径画一段圆弧，再以直线连接两个控制点。

> 注意：`arc()` 函数中表示角的单位是弧度，不是角度。角度与弧度的表达式:弧度=`(Math.PI/180)*角度`。

### 使用样式与颜色

### 绘制文本

### 使用图像

### 变形

### 合成和剪辑


### 基本动画

### 高级动画

### 像素处理

### 点击区域和无障碍访问

### 优化

### 终曲
