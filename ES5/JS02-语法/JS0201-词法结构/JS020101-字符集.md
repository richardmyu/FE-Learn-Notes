# 字符集

JavaScript 程序是用 Unicode 字符集编写的，ESMAScript 5 要求支持 Unicode 3 及后续版本。

## 1.标识符

**标识符**（identifier），就是指变量、函数、属性的名字，或者函数的参数。标识符可以是按照下列格式规则组合起来的一或多个字符：

- 第一个字符必须是一个字母、下划线（`_`）或一个美元符号（`$`）；
- 其他字符可以是字母、下划线、美元符号或数字。

> 标识符中的字母也可以包含扩展的 ASCII 或 Unicode 字母字符（如 À 和 Æ），但不推荐这样做。

按照惯例，ECMAScript 标识符采用驼峰大小写格式，也就是第一个字母小写，剩下的每个单词的首字母大写，例如：

```js
firstSecond
myCar
doSomethingImportant
```

虽然没有谁强制要求必须采用这种格式，但为了与 ECMAScript 内置的函数和对象命名格式保持一致，可以将其当作一种最佳实践。

> 不能把关键字、保留字、`true`、`false` 和 `null` 用作标识符。

## 2.区分大小写

JavaScript 是区分大小写的语言。所有的标识符都必须采用一致的大小写形式。

> HTML 并不区分大小写。

## 3.空格、换行符和格式控制符

JavaScript 会忽略程序中 **标识**（token）之间的空格。多数情况下，JavaScript 同样会忽略换行符（）。由于可以在代码中随意使用空格和换行，因此可以采用整齐、一致的缩进来形成统一的编码风格，从而提高代码的可读性。

- **空格**

以下都会被解析为空格：

| name         | unicode  |
| ------------ | -------- |
| 普通的空格符 | `\u0020` |
| 水平制表符   | `\u0009` |
| 垂直制表符   | `\u0008` |
| 换页符       | `\u000C` |
| 不中断空白   | `\u00A0` |
| 字节序标记   | `\uFEFF` |
| Zs 类        |

- **换行**

以下都会被解析为换行：

| name     | unicode  |
| -------- | -------- |
| 换行符   | `\u000A` |
| 回车符   | `\u000D` |
| 行分隔符 | `\u2028` |
| 段分隔符 | `\u2029` |

> 回车符加换行符在一起被解析为一个单行结束符。

- **格式控制符**

这些字符可以用在 JavaScript 的注释、字符串直接量和正则表达式直接量中，但不能用在标识符中。

> 例外：零宽连接符（`\u200D`）和零宽非连接符（`\uFEFF`）是可以出现在标识符中的，但不能作为标识符的首字符。

## 4.Unicode 转义序列

在有些计算机硬件和软件里，无法显示或输入 Unicode 字符全集。为了支持那些使用老旧技术的程序员，JavaScript 定义了一种特殊序列：使用 6 个 ASCII 字符来代表任意 16 位 Unicode 内码。这些 Unicode 转义序列均以 `\u` 为前缀，其后跟随 4 个十六进制数（使用数字以及大写或小写的字母 A ~ F 表示）。这种 Unicode 转义写法可以用在 JavaScript 字符串直接量、正则表达式直接量和标识符中（关键字除外）。例如，字符 `é` Unicode 转义写法为 `\u00E9`：

```js
"café" === "caf\u00e9" // true
```

Unicode 转义写法也可以出现在注释中，但由于 JavaScript 会将注释忽略，它们只是被当成上下文的 ASCII 字符处理，而且并不会被解析为其对应的 Unicode 字符。

## 5.Base64 转码

有时，文本里面包含一些不可打印的符号，比如 ASCII 码 0 到 31 的符号都无法打印出来，这时可以使用 Base64 编码，将它们转成可以打印的字符。另一个场景是，有时需要以文本格式传递二进制数据，那么也可以使用 Base64 编码。

所谓 Base64 就是一种 **编码方法**，可以将任意值转成 `0～9、A～Z、a-z、+` 和 `/` 这 64 个字符组成的可打印字符。使用它的主要目的，不是为了加密，而是 *为了不出现特殊字符*，简化程序的处理。

JavaScript 原生提供两个 Base64 相关的方法。

- `btoa()`：任意值转为 Base64 编码
- `atob()`：Base64 编码转为原来的值

```js
btoa("i mess you"); //aSBtZXNzIHlvdQ==
atob("aSBtZXNzIHlvdQ=="); //i mess you
```

> 注意，这两个方法不适合非 ASCII 码的字符，会报错。

要将非 ASCII 码字符转为 Base64 编码，必须中间插入一个转码环节，再使用这两个方法。

```js
btoa(encodeURIComponent("分分合合"));
// "JUU1JTg4JTg2JUU1JTg4JTg2JUU1JTkwJTg4JUU1JTkwJTg4"

decodeURIComponent(atob("JUU1JTg4JTg2JUU1JTg4JTg2JUU1JTkwJTg4JUU1JTkwJTg4"));
// 分分合合
```
