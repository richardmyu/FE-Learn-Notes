<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>报数</title>
  </head>
  <body>
    <script>
      /*
      报数序列是一个整数序列，按照其中的整数的顺序进行报数，得到下一个数。其前五项如下：

      1.     1
      2.     11
      3.     21
      4.     1211
      5.     111221

      1 被读作  "one 1"  ("一个一") , 即 11。
      11 被读作 "two 1s" ("两个一"）, 即 21。
      21 被读作 "one 2",  "one 1" （"一个二" ,  "一个一") , 即 1211。

      给定一个正整数 n（1 ≤ n ≤ 30），输出报数序列的第 n 项。

      注意：整数顺序将表示为一个字符串。



      示例 1:

      输入: 1
      输出: "1"
      示例 2:

      输入: 4
      输出: "1211"
      */

      /**
       * @param {number} n
       * @return {string}
       */
      var countAndSay = function(n) {
        let ary = ["1", "11", "21", "1211", "111221"];
        if (n < 1) {
          return 0;
        }
        if (n <= 5) {
          return ary[n - 1];
        }
        if (n > 5) {
          for (let i = 5; i < n; i++) {
            ary[i] = fn(ary[i - 1]);
          }
        }
        return ary[n - 1];
      };
      function fn(str) {
        let reg = /(1+|2+|3+|4+|5+|6+|7+|8+|9+)/g;
        let newStr = "";
        str = str.match(reg);
        str = str.map(item => {
          return "" + item.length + item[0];
        });

        str.forEach(item => (newStr = newStr + item));
        return newStr;
      }
      // console.log(fn("1"));
      // console.log(fn("11"));
      // console.log(fn("21"));
      // console.log(fn("1211"));
      // console.log(fn("111221"));

      console.log(countAndSay(1));
      console.log(countAndSay(2));
      console.log(countAndSay(3));
      console.log(countAndSay(4));
      console.log(countAndSay(5));
      console.log(countAndSay(6));
      console.log(countAndSay(7));
    </script>
  </body>
</html>
