<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // function* helloWorldGenerator() {
      //   console.log("一切猜刚刚开始");
      //   yield "hello";
      //   console.log("准备好了吗？");
      //   console.log("omg，已经开始了吗？");
      //   yield "world";
      //   console.log("也许我可以做得更多");
      //   return "ending";
      // }

      // var hw = helloWorldGenerator();
      // console.log(hw);

      // console.log(hw.next());
      // // 一切猜刚刚开始
      // // { value: 'hello', done: false }

      // console.log(hw.next());
      // // 准备好了吗？
      // // omg，已经开始了吗？
      // // { value: 'world', done: false }

      // console.log(hw.next());
      // // 也许我可以做得更多
      // // { value: 'ending', done: true }

      // console.log(hw.next());
      // // { value: undefined, done: true }

      // function* f() {
      //   console.log("执行了！");
      // }

      // var generator = f();

      // generator.next();
      // generator.next();
      // setTimeout(function() {
      //   generator.next();
      // }, 0);

      // var arr = [1, [[2, 3], 4], [5, 6]];

      // var flat = function*(a) {
      //   var length = a.length;
      //   for (var i = 0; i < length; i++) {
      //     var item = a[i];
      //     if (typeof item !== "number") {
      //       yield* flat(item);
      //     } else {
      //       yield item;
      //     }
      //   }
      // };
      // for (var f of flat(arr)) {
      //   console.log(f);
      // }

      // var myIterable = {};
      // myIterable[Symbol.iterator] = function*() {
      //   yield 1;
      //   yield 2;
      //   yield 3;
      // };

      // console.log([...myIterable]); // [1, 2, 3]

      // function* f() {
      //   for (var i = 0; true; i++) {
      //     var reset = yield i;
      //     if (reset) {
      //       i = -1;
      //     }
      //   }
      // }

      // var g = f();

      // console.log(g.next()); // { value: 0, done: false }
      // console.log(g.next()); // { value: 1, done: false }
      // console.log(g.next(true)); // { value: 0, done: false }
      // console.log(g.next()); // { value: 1, done: false }
      // console.log(g.next()); // { value: 2, done: false }

      // function* foo(x) {
      //   var y = 2 * (yield x + 1);
      //   var z = yield y / 3;
      //   console.log(x, y, z);
      //   return x + y + z;
      // }

      // var a = foo(5);
      // console.log(a.next()); // Object{value:6, done:false}
      // console.log(a.next()); // Object{value:NaN, done:false}
      // console.log(a.next()); // Object{value:NaN, done:true}

      // var b = foo(5);
      // console.log(b.next()); // { value:6, done:false }
      // console.log(b.next(12)); // { value:8, done:false }
      // console.log(b.next(13)); // { value:42, done:true }

      // function* fibonacci() {
      //   let [prev, curr] = [0, 1];
      //   for (;;) {
      //     yield curr;
      //     [prev, curr] = [curr, prev + curr];
      //   }
      // }

      // for (let n of fibonacci()) {
      //   if (n > 1000) break;
      //   console.log(n);
      // }

      // var g = function*() {
      //   try {
      //     yield;
      //   } catch (e) {
      //     console.log("内部捕获", e);
      //   }
      // };

      // var i = g();
      // i.next();

      // try {
      //   i.throw("a");
      //   i.throw("b");
      // } catch (e) {
      //   console.log("外部捕获", e);
      // }

      // var g = function*() {
      //   try {
      //     yield;
      //   } catch (e) {
      //     console.log(e);
      //   }
      // };

      // var i = g();
      // i.next();
      // i.throw(new Error("出错了！"));

      var g = function*() {
        while (true) {
          yield;
          console.log("内部捕获", e);
        }
      };

      var i = g();
      i.next();

      try {
        i.throw("a");
        i.throw("b");
      } catch (e) {
        console.log("外部捕获", e);
      }
    </script>
  </body>
</html>
